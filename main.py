import os,sys
#os.system("pip install fastapi")
#os.system("pip install uvicorn")
from fastapi import Response
import requests
import os
import random
import uvicorn
from fastapi import Request
import json
from user_agent import generate_user_agent
from fastapi.responses import JSONResponse
from fastapi import FastAPI
import secrets
cok = secrets.token_hex(8) * 2
app = FastAPI()
a=int(0)
from fastapi import FastAPI, UploadFile

app = FastAPI()

   
@app.get('/api/tiktok/{gmail}')
async def ga(gmail):

    global a,tl,cok
    #if "4"=="4":
    try:
    	pro=['207.180.204.105:3128', '94.242.54.119:3128', '124.204.33.162:8000', '139.59.1.14:3128', '103.47.67.154:8080', '112.6.117.178:8085', '209.97.150.167:3128', '201.217.49.2:80', '173.212.229.53:3128', '182.253.191.132:8080', '124.156.100.105:8118', '103.144.102.57:8080', '217.30.170.213:3128', '201.91.82.155:3128', '193.31.27.123:80', '182.90.224.115:3128', '206.189.23.38:8048', '119.15.86.130:8080', '201.140.208.146:3128', '182.101.207.11:8080', '129.213.183.152:80', '200.106.187.245:999', '94.75.76.3:8080', '77.247.225.49:3128', '20.113.24.12:8080', '194.233.77.110:6666', '103.164.99.58:8181', '120.26.14.114:8888', '05.252.161.48:8080', '103.181.245.149:8080', '67.212.83.54:1080', '103.231.78.36:80', '114.4.104.254:3128', '58.254.141.70:8998', '116.58.254.59:8080', '176.102.66.197:8888', '134.209.111.123:3128', '103.110.91.242:3128', '31.131.67.14:8080', '85.195.104.71:80', '62.69.212.197:8090', '103.152.232.51:8080', '45.148.123.27:3128', '122.52.219.36:8080', '187.217.54.84:80', '5.56.133.132:3128', '202.166.165.114:8000', '170.233.235.249:3128', '181.224.207.21:999', '102.68.135.229:8080', '103.23.206.170:8080', '103.156.217.203:8080', '197.155.158.22:80', '103.242.105.86:3128', '45.156.29.126:9090', '45.149.43.56:53281', '181.10.160.156:8080', '36.67.57.45:30066', '103.145.57.109:8080', '1.71.132.64:30003', '88.132.95.93:53281', '200.54.22.74:8080', '101.200.127.149:3129', '47.74.152.29:8888', '107.172.73.179:7890', '91.230.199.174:61440', '110.78.114.161:8080', '156.200.116.68:1981', '54.39.102.233:3128', '36.68.44.34:8080', '139.9.64.238:443', '60.21.210.178:10808', '181.10.117.254:999', '202.180.20.66:8080', '185.78.67.133:3128', '14.207.85.37:8080', '103.248.93.5:8080', '209.146.19.61:55443', '185.242.86.9:8080', '177.105.232.114:8080', '45.127.56.194:84', '197.248.184.158:53281', '181.48.23.250:8080', '201.184.176.107:8080', '103.114.98.217:6000', '67.212.83.55:1080', '35.240.63.166:3128', '159.196.222.215:8080', '190.61.84.166:9812', '178.54.21.203:8081', '91.233.111.49:1080', '190.2.210.249:999', '103.172.70.18:8080', '181.191.140.134:999', '187.1.88.106:3128', '45.180.10.197:999', '36.89.156.146:8080', '45.7.177.238:34234', '45.71.115.203:999', '157.119.211.133:8080', '105.243.252.21:8080', '115.124.75.33:8080', '43.243.172.18:83', '216.137.184.253:80', '103.144.18.94:8083', '103.134.97.49:83', '201.157.254.26:8080', '177.128.44.131:6006', '80.244.231.133:8080', '85.121.208.223:2019', '82.165.21.59:80', '41.65.174.120:1976', '138.199.15.141:8080', '138.117.231.130:999', '110.170.126.13:3128', '110.232.66.209:808', '197.232.135.174:41890', '165.16.27.33:1976', '176.214.97.13:8081', '151.22.181.214:8080', '139.255.5.98:8080', '209.97.150.167:8080', '38.127.179.79:29602', '193.138.146.67:3128', '119.184.185.80:8118', '18.196.34.179:37881', '154.236.177.101:1981', '103.123.64.234:3128', '139.59.249.244:7777', '5.104.174.199:23500', '43.243.174.3:82', '1.203.115.191:30003', '111.225.152.141:8089', '200.54.25.226:8080', '103.156.15.34:8080', '111.118.135.132:56627', '202.62.10.51:8082', '125.25.82.190:8080', '36.94.183.153:8080', '185.110.211.217:8080', '134.19.254.2:21231', '207.180.217.107:3128', '78.186.85.127:10001', '103.131.18.119:8080', '185.51.10.19:80', '103.105.228.66:8080', '103.41.212.230:44759', '103.159.90.42:83', '188.133.173.21:8080', '202.164.152.233:8080', '182.253.73.130:8080', '203.189.89.158:8080', '181.176.221.151:9812', '93.86.63.73:8080', '103.37.141.69:80', '173.82.149.243:8080', '190.90.242.210:999', '36.255.86.114:83', '218.86.87.171:31661', '88.1.165.103:3128', '212.164.52.198:80', '41.65.236.37:1976', '181.129.2.90:8081', '196.202.215.143:41890', '156.200.110.116:1976', '190.220.1.173:56974', '43.250.127.98:9001', '47.112.122.163:82', '179.255.219.182:8080', '188.170.251.195:8080', '46.161.195.105:1981', '93.240.4.54:3128', '177.220.188.213:8080', '50.233.228.147:8080', '140.227.127.205:80', '213.230.121.116:3128', '178.210.51.118:8080', '91.211.246.30:3128', '118.163.13.200:8080', '189.203.234.146:999', '213.212.210.252:1976', '41.65.236.37:1981', '183.89.143.134:8080', '190.2.210.186:999', '112.124.56.162:8080', '125.25.32.214:8080', '202.62.52.4:8080', '149.34.2.39:8080', '193.233.162.65:8080', '212.64.72.199:8080', '161.97.123.237:3128', '36.93.18.141:9812', '95.0.168.46:1981', '131.72.69.202:40033', '181.204.44.235:999', '172.97.119.193:8181', '203.189.137.180:9812', '103.79.74.193:53879', '167.114.185.69:3128', '203.112.223.126:8080','145.40.97.148:9400', '145.40.97.148:9400', '144.91.77.153:3128', '135.181.150.104:8080', '135.181.45.15:8080', '34.151.231.232:3129', '128.140.7.236:8080', '128.140.7.236:8080', '34.254.90.167:9812', '129.154.225.163:8100', '80.51.221.125:8080', '114.129.19.139:8080', '34.151.231.232:3129', '183.221.242.107:8443', '135.181.45.15:8080', '103.84.253.10:80', '154.70.107.81:3128', '204.199.174.13:999', '102.165.51.172:3128', '103.159.96.110:8085', '176.95.54.202:83', '35.247.221.112:3129', '170.79.12.75:9090', '190.61.97.229:999', '103.83.179.78:2016', '77.89.35.50:8080', '35.247.221.112:3129', '40.76.245.70:8080', '64.225.8.118:9989', '190.19.114.104:8080', '149.154.157.17:5678', '114.4.233.34:8080', '186.97.102.68:999', '62.201.223.7:8183', '202.8.74.9:8080', '157.245.144.111:8080', '183.221.242.103:9443', '36.74.163.65:8080', '201.131.239.233:999', '218.207.72.202:3128', '171.6.7.198:8080', '79.106.170.34:8989', '162.212.156.172:8080', '179.63.149.4:999', '186.121.235.66:8080', '103.36.35.135:8080', '190.217.105.194:8080', '176.95.54.202:83', '182.53.85.34:8080', '103.69.108.78:8191', '36.37.146.119:32650', '186.150.201.38:8080', '35.198.9.82:3129', '61.139.26.94:3128', '103.169.19.130:8080', '35.198.63.193:3129', '34.95.187.223:3129', '45.174.87.18:999', '202.69.38.82:8080', '200.123.29.45:3128', '186.121.235.66:8080', '103.52.213.131:80', '45.61.187.67:4000', '45.61.187.67:4006', '45.61.187.67:4001', '45.61.187.67:4004', '45.61.187.67:4009', '34.118.86.227:8585', '34.125.184.194:8080', '34.174.159.253:8585', '34.172.175.72:8585', '34.162.190.6:8585', '208.196.136.141:3128', '194.54.56.58:3128', '188.93.237.29:3128', '144.91.77.153:3128', '188.93.237.29:3128', '188.93.237.29:3128', '23.152.40.14:3128', '194.54.56.58:3128', '23.152.40.14:3128', '67.43.227.226:24351', '67.43.227.229:27867', '67.43.227.229:27867', '67.43.227.229:27867', '192.99.5.161:8081', '67.43.227.226:24351', '194.54.56.58:3128', '23.152.40.14:3128', '72.10.160.172:2769', '158.51.121.31:8118', '192.99.5.161:8081', '194.54.56.58:3128', '192.99.5.161:8081', '129.153.42.81:3128', '129.153.42.81:3128', '144.91.77.153:3128', '144.91.77.153:3128', '144.91.77.153:3128', '72.10.164.178:11301', '67.43.227.226:8137', '72.10.164.178:24343', '67.43.227.226:8137', '185.217.136.67:1337', '67.43.227.227:18963', '196.250.239.229:8787', '72.10.164.178:2173', '200.59.184.192:999', '172.96.117.205:38001', '67.43.227.227:13997', '103.127.220.70:8181', '155.138.204.3:9999', '72.10.164.178:9547', '189.240.60.169:9090', '72.10.160.171:8095', '72.10.160.171:8095', '67.43.227.228:7321', '188.225.24.22:3128', '72.10.160.171:8095', '72.10.160.171:8095', '67.43.227.226:8137', '103.13.120.116:3128', '67.43.227.226:8137', '103.175.236.222:8080', '72.10.160.90:1325', '85.109.104.100:9090', '67.43.227.226:8137', '201.170.42.65:3128', '67.43.227.226:8137', '67.43.227.226:8137', '67.43.236.20:26365', '195.101.214.57:8080', '67.43.236.20:22121', '103.178.42.3:8181', '83.136.106.26:3128', '103.253.135.82:3129', '72.10.164.178:13099', '82.146.45.136:3128', '27.54.71.231:8080', '67.43.228.253:13915', '72.10.160.171:8095', '67.43.227.228:22145', '83.221.222.240:3128', '72.10.160.93:27221', '202.51.98.229:7000', '208.87.243.199:3128', '158.179.213.254:3128', '189.240.60.171:9090', '47.184.136.113:3128', '165.227.147.238:3128', '72.10.164.178:10511', '27.121.82.14:8080', '201.71.3.42:999', '67.43.228.253:8827', '201.91.82.155:3128', '115.127.114.209:5020', '103.147.246.135:8080', '200.59.184.199:999', '45.124.184.13:80', '72.10.164.178:26181', '208.67.28.28:58090', '72.10.160.90:9267', '67.43.227.227:23459', '67.43.236.20:15719', '94.182.146.250:8080', '72.10.160.171:8095', '72.10.160.171:8095', '63.250.52.82:8118', '189.240.60.168:9090', '189.240.60.163:9090', '72.10.160.92:22123', '115.147.34.50:8080', '189.240.60.164:9090', '89.135.59.71:8090', '186.96.50.20:999', '72.10.160.171:17469', '38.6.221.106:8118', '67.43.227.227:3143', '189.240.60.166:9090', '182.253.109.118:8080', '4.144.161.159:80', '45.178.133.76:999', '217.26.191.75:999', '35.185.196.38:3128', '187.73.102.70:9292', '197.242.146.109:3128', '37.120.192.154:8080', '181.174.115.9:1994', '129.80.134.71:3128', '14.160.32.23:8080', '82.194.45.218:3128', '198.57.27.33:80', '164.77.240.28:999', '58.69.125.145:8081', '41.242.116.150:50003', '72.10.164.178:15349', '20.219.182.59:3129', '213.6.99.106:8080', '103.51.205.20:8080', '13.234.24.116:3128', '45.178.133.78:999', '65.1.244.232:1080', '158.51.210.75:8888', '20.44.190.150:3129', '222.127.153.231:8080', '101.255.118.86:8080', '180.210.191.122:8080', '103.115.20.26:8090', '52.13.248.29:3128', '94.72.100.20:2128', '201.20.118.146:27234', '44.225.65.25:80', '190.61.106.97:8080', '89.250.152.76:8080', '103.195.65.209:8080', '20.219.177.85:3129', '18.169.83.87:1080', '20.219.183.188:3129', '87.247.251.240:3128', '18.134.236.231:3128', '120.28.33.132:8080', '203.190.41.151:8081', '35.160.134.36:3128', '45.187.12.56:8080', '45.71.15.136:9292', '20.219.180.105:3129', '20.219.180.149:3129', '14.47.70.137:8080', '202.162.213.182:8080', '46.219.8.201:41890', '212.110.188.207:34405', '20.204.212.45:3129', '110.34.3.229:3128', '190.187.201.26:8080', '180.232.171.210:8080', '80.240.202.218:8080', '122.155.165.191:3128', '103.234.159.5:8080', '20.219.177.73:3129', '190.26.255.28:999', '125.25.82.48:8081', '103.147.247.175:8181', '188.132.146.75:8080', '34.95.243.122:8081', '103.250.130.111:8080', '94.232.11.178:46449', '18.135.133.116:3128', '103.133.223.230:8080', '23.225.72.125:3503', '34.144.249.134:80', '200.108.197.2:8080', '177.93.40.54:999', '65.109.152.88:8888', '20.204.212.76:3129', '197.232.36.85:41890', '3.10.93.50:3128', '103.25.210.141:3319', '41.33.254.186:1981', '77.237.28.191:8080', '5.104.174.199:23500', '35.189.95.79:3128', '154.236.179.229:1981', '20.204.214.23:3129', '41.111.243.133:80', '45.181.123.97:999', '95.216.146.2:8328', '34.220.156.153:8899', '190.97.238.81:999', '54.191.109.158:3128', '197.98.201.117:10101', '197.98.201.117:11051', '61.216.156.222:60808', '103.90.227.244:3128', '185.44.232.30:53281', '20.44.188.17:3129', '103.139.144.105:8080', '20.219.178.121:3129', '103.15.223.251:3128', '5.252.23.249:3128', '52.41.38.173:8123', '165.225.113.214:10006', '20.72.218.43:8080', '165.225.113.214:10739', '165.225.113.214:11459', '197.98.201.97:11302', '197.98.201.97:443', '197.98.201.74:9480', '197.98.201.74:9401', '52.222.28.135:443', '165.225.113.214:8800', '197.98.201.97:10515', '165.225.113.220:10884', '197.98.201.74:10919', '197.98.201.74:10833', '154.73.29.129:8080', '165.225.72.151:11039', '165.225.72.38:8800', '197.98.201.74:10763', '67.43.236.20:4237', '191.102.254.26:8085', '94.198.221.4:3128', '203.79.29.246:1111', '147.75.92.251:80', '197.98.201.74:10011', '165.225.72.151:10089', '165.225.72.151:11240', '191.102.254.53:8085', '165.225.72.151:3128', '54.188.241.111:1981', '190.121.239.195:999', '165.225.72.151:10909', '165.225.72.151:80', '165.225.72.151:10858', '165.225.72.151:10879', '114.8.131.178:8080', '45.189.117.198:999', '165.225.72.151:10015', '177.85.245.87:8088']
    	nip=random.choice(pro)
    	url = "https://www.tiktok.com/passport/web/user/check_email_registered";data = f"email={gmail}&aid=1459&language=en&account_sdk_source=web&region=CHN";hed = {
 "User-Agent":generate_user_agent(),
};r = requests.post(url,headers=hed,data=data,proxies= {"http": f"http://{nip}", "https": f"http://{nip}"}).text
    	if '{"is_registered":1}' in r:
    		data={
    		"email":f"{gmail}",
    		"status":"Good",
    		"Dev":"Marko_Bots",
    		}
    		return JSONResponse(content=data)

    	elif '{"is_registered":0}' in r:
    	   data2={
    		"email":f"{gmail}",
    		"status":"Bad",
    		"Dev":"Marko_Bots",
    		}
    	   return JSONResponse(content=data2)
    	else:
    		data3={
    		"email":f"{gmail}",
    		"status":"Error",
    		"Dev":"Marko_Bots",
    		}
    		return JSONResponse(content=data3)
    except:
    		data3={
    		"email":f"{gmail}",
    		"status":"Try",
    		"Dev":"Marko_Bots",
    		}
    		return JSONResponse(content=data3)
